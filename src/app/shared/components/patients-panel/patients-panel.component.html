<!-- Search Component -->
<app-patient-search
  [patients]="patients"
  (filteredPatients)="onFilteredPatients($event)"
></app-patient-search>

<!-- Patients Table -->
<app-card>
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-semibold text-gray-900">All Patients</h2>
    <div class="text-sm text-gray-500">
      {{ filteredPatients.length }} of {{ patients.length }} patients
    </div>
  </div>

  <app-table
    [columns]="patientColumns"
    [striped]="true"
    [hover]="true"
  >
    <tr *ngFor="let patient of paginatedPatients">
      <td class="px-4 py-3">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center mr-4">
            <span class="text-primary font-medium">{{ patient.name.charAt(0) }}</span>
          </div>
          <div>
            <div class="font-medium text-gray-900">{{ patient.name }}</div>
            <div class="text-sm text-gray-500">{{ patient.age }} years, {{ patient.gender }}</div>
          </div>
        </div>
      </td>
      <td class="px-4 py-3">
        <div class="text-sm text-gray-900">
          {{ patient.conditions.join(', ') || 'No conditions' }}
        </div>
      </td>
      <td class="px-4 py-3">
        <span
          [class]="patient.admitted ? 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800' : 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800'"
        >
          {{ patient.admitted ? 'Admitted' : 'Not Admitted' }}
        </span>
      </td>
      <td class="px-4 py-3">
        <div class="flex space-x-2">
          <a
            [routerLink]="['/patients', patient.id]"
            class="text-primary hover:text-primary-dark text-sm font-medium"
          >
            View
          </a>
          <button
            *ngIf="!patient.admitted"
            (click)="admitPatient(patient.id)"
            [disabled]="admittingPatients.has(patient.id)"
            class="text-accent hover:text-accent-dark text-sm font-medium disabled:opacity-50"
          >
            {{ admittingPatients.has(patient.id) ? 'Syncing...' : 'Admit' }}
          </button>
        </div>
      </td>
    </tr>
  </app-table>

  <!-- Pagination -->
  <app-pagination
    [totalItems]="50"
    [itemsPerPage]="itemsPerPage"
    [currentPage]="currentPage"
    (pageChanged)="onPageChanged($event)"
  ></app-pagination>
</app-card>
